# PB Configuration File
# This file is automatically generated by CMake

# Find required dependencies first
find_package(PkgConfig CONFIG REQUIRED)
find_package(Protobuf CONFIG REQUIRED)
find_package(gRPC CONFIG REQUIRED)

set(PB_VERSION @PROJECT_VERSION@)
set(PB_INCLUDE_DIRS "@CMAKE_CURRENT_SOURCE_DIR@/include")
set(PB_LIBRARY_DIRS "@OUTPUT_LIB_DIR@")

# Available PB submodules (for reference)
set(PB_AVAILABLE_SUBMODULES @SUBMODULES@)

# Individual library targets configuration
@LIBRARY_TARGETS@

# Create imported targets for each submodule
foreach(SUBMODULE ${PB_AVAILABLE_SUBMODULES})
    if(NOT TARGET PB::${SUBMODULE})
        add_library(PB::${SUBMODULE} SHARED IMPORTED)
        set_target_properties(PB::${SUBMODULE} PROPERTIES
            IMPORTED_LOCATION "${PB_LIBRARY_DIRS}/lib${SUBMODULE}.so"
            INTERFACE_INCLUDE_DIRECTORIES "${PB_INCLUDE_DIRS}"
            INTERFACE_LINK_LIBRARIES "protobuf::libprotobuf;gRPC::grpc++"
        )
    endif()
endforeach()

# Legacy support: all libraries list (not recommended for new projects)
set(PB_LIBRARIES)
foreach(SUBMODULE ${PB_AVAILABLE_SUBMODULES})
    list(APPEND PB_LIBRARIES "PB::${SUBMODULE}")
endforeach()
